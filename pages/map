<script src="http://kodekloud.s3.amazonaws.com/sites/5438407c6e6f64462d020000/92b82a88144a6207ab1a5e8e0f63d3d1/craftmap.js"></script>
<style>
    .map_container{
        height:357px;
    }
    .popup{
        display:none;
    }
    .store_initial {
        color: #fff;
        background: black;
        margin-bottom: 10px;
        padding: 10px 12px;
        font-weight: bold;
        opacity: 0.8;
        width:100%;
    }
</style>
<div class="green_bar"></div>
<div class="page_main_container">
    <div class="page_left">
        <div class="position_relative">        
            <div class="controls">
            	<div class="dropdown custom_dropdown">                          
                    <a class="btn-prime"  id="map_button">
                        Select a Store <span style="margin-top:3px;" class="fa fa-caret-down pull-right"></span>
                    </a>		    
                </div>            
            </div> 
            <div class="dropdown-menu bottom" id="store_table" style="top:50px">          		
                <div style="height:500px;overflow-y:scroll;overflow-x:hidden;">                                        
                    <div class="map_table">            			                        
                        <div  id="store_list_container">
                            <script id="store_list_template" type="x-tmpl-mustache/text">
                                <p class="store_initial" style="{{show}}">{{initial}}</p>
                                <a href="#" class="store_name_map" store_id="store_{{id}}" onclick="return show_pin(this)">{{name}}</a>
                            </script>
                        </div>
                    </div>          
                </div>                
            </div> 
            <div class="map">
                <div class="map_container" style="">            
                    <img alt="map_image" id="map_image" src="http://midtown2.mallmaverick.com/system/properties/maps/000/000/025/original/map_midtown_edited.jpg?1381443167" />   
                    	
        		</div>
            </div>
        </div>
    </div>
    <div class="page_right">
        <div class="hours_box feature_box">
            <h3 class="hours_header">HOURS</h3>
            <p class="check_hours"><a href="/hours">Check Holiday Hours</a></p>
            <h3 class="newsletter_header font_19">MONDAY AUGUST 00</h3>
            <h3 class="hours_home">9:30 am - 5:30 pm</h3>
            <p class="call_mp_home"><a href="tel:3066538844">Call 306-653-8844</a></p>
        </div>
        <div class="giftcards_box feature_box">
            <a href="/pages/midtown2-gift-cards">
                <h3 class="giftcards_header">GIFT CARDS</h3>
                <img src="http://assets.kodekloud.io/sites/55bba30d6e6f64157e000000/f80b2b0cc97fadff100319399f8b2e1e/midtown_gc_360_360.png" class="" alt="giftcards">
            </a>
        </div>
        
        <div class="newsletter_box feature_box">
            <div id="success_subscribe">
                <i class="fa fa-close pull-right cursor_pointer" id="close_subscribe"></i>
                <p class="middle_align text-center">Thank you for subscribing to our newsletter!</p>
            </div>
            <h3 class="newsletter_header">NEWSLETTER</h3>
            <p>Exclusive deals straight to your inbox!</p>
            <form action="http://mobilefringe.createsend.com/t/d/s/yhudtt/" id="newsletter_form">
                <input name="cm-yhudtt-yhudtt" type="text" placeholder="Enter your email address" id="newsletter_email" class="pull-left" required/>
                <input type="submit" value="SUBSCRIBE" class="btn_mp pull-left" />
                <div class="clearfix"></div>
                <label class="check_text"><input type="checkbox" id="newsletter_agree" />I agree to receive newsletters from Midtown Plaza.</label>
            </form>
        </div>
        <div class="feature_box border_1">
            <h3 class="feature_header">Blog</h3>
            <div class="feature_insider">
                <div class="feature_insider_right">
                    <h3 class="feature_2_header">AUGUST 6, 2015</h3>
                    <p class="feature_2_dates">LOREM IPSUM</p>
                    <p class="feature_2_description">Lorem ipsum dolor sit amet, consectetur adipiscing elit.</p>
                    <a class="read_more" href="#">read more</a>
                </div>
                <div class="feature_insider_left pull-right">
                    <img alt="blog" class="feature_image" src="http://placehold.it/120x160" />
                </div>
                <div class="clearfix"></div>
            </div>
        </div>
    </div>
    <div class="clearfix"></div>
</div>
<script>
    function show_pin(param){
		store_id = $(param).attr('store_id');
		if($("#"+store_id).is(":visible")){
			$("."+store_id).hide();				
			$("#"+store_id).hide();
			$("#no_pin_"+store_id).show();
			$("#show_pin_"+store_id).hide();
			$("#m_no_pin_"+store_id).show();
			$("#m_show_pin_"+store_id).hide();
		}else{
			$(".marker").hide();
			$("#"+store_id).show();
			$("#"+store_id).click();
			$("#no_pin_"+store_id).hide();
			$("#show_pin_"+store_id).show();
			$("#m_no_pin_"+store_id).hide();
			$("#m_show_pin_"+store_id).show();
		}
		$('#store_table').hide()
		
		return false;
    }
    $(function(){
        $("#map_button").click(function(){
            $("#store_table").toggle();
        });
        
    });
    function hide_table(){
        $("#store_table").hide();
        show_table = false;
    }
    $(document).ready(function(e) {
        init(e);
        function renderAll(){
            var stores = getStoresList();
            renderStoreList('#store_list_container','#store_list_template', stores, "stores");
            show_content();    
            $.each(stores, function(i, val){
                x = val.x_coordinate - 19;
                y = val.y_coordinate - 58;
              $('#map_image').after('<div class="marker" id="store_' + val.id  + '" data-coords="' + x + ', ' + y + '" style="display:none">' + val.name + '</div>')
            });
            $('.map_container').craftmap({
                image:{
                    width:780,
                    height:780,
                    name: 'imgMap'
                },
                map: {
                    position: '0,0'
                }
            });
        }
        loadMallDataCached(renderAll); 
    })
</script>